<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript" src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script type="text/javascript">
        function toImg(dom) {
            html2canvas(document.querySelector("body")).then(canvas => {

                var img = document.createElement("img");
                img.src = canvas.toDataURL("img/png", 1);
                img.style.display = "none"
                document.body.appendChild(img)
                img.title = "保存图片"
                img.onload = function() {
                    savePicture(img.src);
                }
            });
        }

        function savePicture(Url, title = "保存图片") {
            var blob = new Blob([''], {
                type: 'application/octet-stream'
            });
            var url = URL.createObjectURL(blob);
            var a = document.createElement('a');
            a.href = Url;
            a.title = title;
            // a.download = Url.replace(/(.*\/)*([^.]+.*)/ig, "$2").split("?")[0];
            a.download = title;
            var e = document.createEvent('MouseEvents');
            e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
            a.dispatchEvent(e);
            URL.revokeObjectURL(url);
        }
    </script>
</head>

<body>
    <button type="button" onclick="toImg()">html转换成图片</button>
    <a href="" title=""></a>
    <h1>Hello,World</h1>

</body>

</html>